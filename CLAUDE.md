# OsteoJump

Сайт остеопата Bykava Hanna. Статический сайт на HTML/CSS/JS с мультиязычной поддержкой.

## Структура проекта

```
/locales/          - Переводы (JSON)
  ├── en.json      - Английский (базовый)
  ├── ru.json      - Русский
  ├── pl.json      - Польский
  ├── uk.json      - Украинский
  └── de.json      - Немецкий
/css/              - Стили
/js/               - Скрипты
/images/           - Изображения
```

## Страницы

- `/` - Главная
- `/about` - Обо мне
- `/prices` - Цены
- `/reviews` - Отзывы
- `/faq` - Вопросы
- `/education` - Образование
- `/location` - Как добраться

## Команды

```bash
make server        # Запустить локальный сервер (порт 8000)
make stop          # Остановить сервер
make thumbnails    # Сгенерировать превью для дипломов
```

---

## /translate - Translation Agent

Агент для работы с переводами сайта.

### Возможности

1. **Проверка переводов** - найти отсутствующие ключи
2. **Добавление переводов** - добавить новый ключ на все языки
3. **Синхронизация** - синхронизировать переводы между языками

### Инструкции для агента

При вызове `/translate` следуй этим правилам:

#### Языки и приоритеты
- `en.json` - базовый язык (эталон структуры)
- `ru.json` - русский
- `pl.json` - польский
- `uk.json` - украинский
- `de.json` - немецкий

#### Проверка отсутствующих ключей

```
/translate check
```

1. Прочитай все файлы в `/locales/`
2. Используй `en.json` как эталон
3. Рекурсивно сравни все ключи
4. Выведи список отсутствующих ключей для каждого языка

#### Добавление нового перевода

```
/translate add <key> "<текст на русском>"
```

Пример: `/translate add booking.success "Запись подтверждена"`

1. Определи путь ключа (например `booking.success` → `{"booking": {"success": "..."}}`)
2. Переведи текст на все 5 языков
3. Добавь ключ во все файлы локализации
4. Сохрани файлы с правильным форматированием (4 пробела отступ)

#### Обновление перевода

```
/translate update <key> "<новый текст на русском>"
```

1. Найди существующий ключ во всех файлах
2. Обнови значение, переведя на каждый язык
3. Сохрани изменения

#### Правила перевода

- Сохраняй тон и стиль оригинала
- Медицинские термины переводи корректно
- Имена собственные (OsteoJump, Bykava Hanna) НЕ переводи
- Адреса и телефоны оставляй без изменений
- Эмодзи сохраняй как есть

#### Формат JSON

- Отступы: 4 пробела
- Без trailing comma
- UTF-8 кодировка
- Сортировка ключей: сохраняй существующий порядок

### Примеры использования

```
/translate check
→ Проверит все файлы и покажет отсутствующие ключи

/translate add faq.question1.title "Как записаться на приём?"
→ Добавит новый вопрос в FAQ на всех языках

/translate update footer.text "© 2025 OsteoJump. Все права защищены."
→ Обновит текст футера на всех языках
```

---

## /screenshot - Screenshot Agent (Субагент)

Субагент для создания скриншотов сайта. Запускается через Task tool в фоновом режиме.

### Почему субагент?

- **Не занимает контекст** - скриншоты возвращают много данных
- **Работает в фоне** - можно продолжать работу
- **Параллельность** - для больших аудитов (35+ скриншотов)

### Как запускать

При вызове `/screenshot` используй **Task tool**:

```
Task(
  subagent_type="general-purpose",
  run_in_background=true,  // для audit
  prompt="<промпт с параметрами из секции ниже>"
)
```

### Промпт для субагента

Передавай субагенту этот промпт, подставляя параметры:

#### Размеры экранов

Breakpoints в CSS:
- `575px` - малые мобильные устройства
- `767px` - граница mobile/tablet
- `1200px` - max-width контейнера

| ID | Устройство | Ширина | Высота | Описание |
|----|------------|--------|--------|----------|
| `mobile-min` | Mobile | 320 | 568 | Минимальный (iPhone SE) |
| `tablet-min` | Tablet | 768 | 1024 | Минимальный (iPad portrait) |
| `desktop-narrow` | Desktop | 1024 | 768 | Узкий (небольшой ноутбук) |
| `desktop-medium` | Desktop | 1280 | 800 | Средний (стандартный ноутбук) |
| `desktop-wide` | Desktop | 1920 | 1080 | Широкий (Full HD монитор) |

**Критические точки для проверки:**
- `320px` - минимальная ширина, всё должно помещаться
- `768px` - переключение на tablet layout
- `1024px` - узкий desktop, контент не должен быть сжатым
- `1200px` - контейнер достигает max-width
- `1920px` - широкий экран, контент центрирован

#### Страницы сайта

| Путь | Название |
|------|----------|
| `/` | Главная |
| `/about` | Обо мне |
| `/prices` | Цены |
| `/reviews` | Отзывы |
| `/faq` | Вопросы |
| `/education` | Образование |
| `/location` | Как добраться |

#### Языки

Переключение языка через URL параметр или localStorage:
- `?lang=en` - английский
- `?lang=ru` - русский
- `?lang=pl` - польский
- `?lang=uk` - украинский
- `?lang=de` - немецкий

### Структура папок для скриншотов

Скриншоты сохраняются с версионированием для сравнения:

```
.screenshots/
  YYYY-MM-DD_NNN/           # дата + номер сессии
    home-mobile-min.png
    home-tablet-min.png
    home-desktop-narrow.png
    home-desktop-medium.png
    home-desktop-wide.png
    about-mobile-min.png
    ...
  2024-01-13_001/           # первая сессия 13 января
  2024-01-13_002/           # вторая сессия 13 января
  2024-01-14_001/           # первая сессия 14 января
```

**Правила именования:**
- Папка: `YYYY-MM-DD_NNN` где NNN - порядковый номер сессии за день (001, 002, ...)
- Файл: `<page>-<device-id>.png` (например `home-mobile-min.png`, `about-desktop-wide.png`)
- Для страницы `/` использовать имя `home`
- Для вложенных страниц убирать слэш: `/about` → `about`

**Перед созданием скриншотов:**
1. Проверь последнюю папку в `.screenshots/`
2. Определи следующий номер сессии для текущей даты
3. Создай новую папку: `mkdir -p .screenshots/YYYY-MM-DD_NNN`

**После создания скриншотов:**
Playwright MCP сохраняет в `.playwright-mcp/`. Скопируй в версионированную папку:
```bash
cp .playwright-mcp/home-*.png .screenshots/YYYY-MM-DD_NNN/
```

### Команды и шаблоны промптов

#### /screenshot <page> [device-id] — одна страница

```
/screenshot /about mobile-min
```

**Запуск:** `Task(subagent_type="general-purpose", prompt=<промпт ниже>)`

**Промпт:**
```
Сделай скриншот страницы {PAGE} на размере {DEVICE_ID}.

Размер: {WIDTH}x{HEIGHT}
URL: http://localhost:8000{PAGE}
Имя файла: {PAGE_NAME}-{DEVICE_ID}.png

Шаги:
1. browser_navigate на URL
2. browser_resize на {WIDTH}x{HEIGHT}
3. browser_wait_for time=1
4. browser_take_screenshot с именем файла

Верни путь к скриншоту.
```

---

#### /screenshot <page> all — все размеры

```
/screenshot /about all
```

**Запуск:** `Task(subagent_type="general-purpose", prompt=<промпт ниже>)`

**Промпт:**
```
Сделай скриншоты страницы {PAGE} на всех размерах.

URL: http://localhost:8000{PAGE}
Имя файла: {PAGE_NAME}

Размеры:
| ID | Ширина | Высота |
| mobile-min | 320 | 568 |
| tablet-min | 768 | 1024 |
| desktop-narrow | 1024 | 768 |
| desktop-medium | 1280 | 800 |
| desktop-wide | 1920 | 1080 |

Для каждого размера:
1. browser_resize
2. browser_wait_for time=1
3. browser_take_screenshot как {PAGE_NAME}-{SIZE_ID}.png

Верни список созданных файлов.
```

---

#### /screenshot audit — полный аудит (в фоне)

```
/screenshot audit
```

**Запуск:** `Task(subagent_type="general-purpose", run_in_background=true, prompt=<промпт ниже>)`

**Промпт:**
```
Сделай полный аудит скриншотов для сайта OsteoJump.

Страницы (7 штук):
- / → home
- /about → about
- /prices → prices
- /reviews → reviews
- /faq → faq
- /education → education
- /location → location

Размеры (5 штук):
| ID | Ширина | Высота |
| mobile-min | 320 | 568 |
| tablet-min | 768 | 1024 |
| desktop-narrow | 1024 | 768 |
| desktop-medium | 1280 | 800 |
| desktop-wide | 1920 | 1080 |

Для каждой страницы, для каждого размера:
1. browser_navigate на http://localhost:8000{путь}
2. browser_resize
3. browser_wait_for time=1
4. browser_take_screenshot как {page}-{size}.png

В конце выведи:
- Сколько скриншотов создано
- Список файлов
- Были ли проблемы
```

---

#### /screenshot <page> --full — полная страница

**Промпт (добавить к любому):**
```
Используй fullPage: true в browser_take_screenshot
```

### Примеры использования

```
/screenshot /
→ Скриншот главной страницы (desktop-medium, 1280×800)

/screenshot /location mobile-min
→ Минимальный мобильный скриншот (320×568) страницы "Как добраться"

/screenshot /about all
→ 5 скриншотов страницы "Обо мне" на всех размерах

/screenshot / mobile-min all-langs
→ 5 мобильных скриншотов главной на всех языках

/screenshot audit
→ Полный аудит: 7 страниц × 5 размеров = 35 скриншотов

/screenshot /education desktop-wide --full
→ Полная страница "Образование" на широком экране (1920×1080)
```

### Чек-лист проверки responsive

При запуске `/screenshot <page> all` проверяй:

**mobile-min (320px):**
- [ ] Весь текст читаем, не обрезан
- [ ] Кнопки достаточного размера для нажатия
- [ ] Нет горизонтальной прокрутки
- [ ] Меню скрыто в hamburger

**tablet-min (768px):**
- [ ] Layout переключился на tablet
- [ ] Изображения масштабируются корректно
- [ ] Отступы адекватные

**desktop-narrow (1024px):**
- [ ] Контент не сжат
- [ ] Навигация полностью видна
- [ ] Карточки/колонки правильно расположены

**desktop-medium (1280px):**
- [ ] Стандартный вид, без проблем

**desktop-wide (1920px):**
- [ ] Контент центрирован (max-width: 1200px)
- [ ] Нет растянутых элементов
- [ ] Фон заполняет пространство
